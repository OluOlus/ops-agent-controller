{
  "start_time": "2026-02-01T22:29:23.629571",
  "test_suites": {
    "infrastructure_smoke": {
      "status": "failed",
      "return_code": 1,
      "total": 0,
      "passed": 0,
      "failed": 0,
      "skipped": 0,
      "stdout": "============================= test session starts ==============================\nplatform darwin -- Python 3.9.6, pytest-8.4.2, pluggy-1.6.0 -- /Library/Developer/CommandLineTools/usr/bin/python3\ncachedir: .pytest_cache\nhypothesis profile 'default'\nrootdir: /Users/Olu/vsc/ops-agent-controller\nconfigfile: pytest.ini\nplugins: mock-3.15.1, hypothesis-6.141.1, cov-7.0.0\ncollecting ... collected 9 items\n\ntest_smoke_tests.py::TestInfrastructureSmokeTests::test_infrastructure_provisioning_validation FAILED [ 11%]\ntest_smoke_tests.py::TestInfrastructureSmokeTests::test_health_endpoint_accessibility PASSED [ 22%]\ntest_smoke_tests.py::TestInfrastructureSmokeTests::test_health_endpoint_execution_mode_reporting PASSED [ 33%]\ntest_smoke_tests.py::TestInfrastructureSmokeTests::test_health_endpoint_llm_provider_status PASSED [ 44%]\ntest_smoke_tests.py::TestInfrastructureSmokeTests::test_health_endpoint_aws_tool_access_status PASSED [ 55%]\ntest_smoke_tests.py::TestInfrastructureSmokeTests::test_chat_endpoint_accessibility PASSED [ 66%]\ntest_smoke_tests.py::TestInfrastructureSmokeTests::test_cors_headers_present PASSED [ 77%]\ntest_smoke_tests.py::TestInfrastructureSmokeTests::test_rate_limiting_functionality PASSED [ 88%]\ntest_smoke_tests.py::TestInfrastructureSmokeTests::test_component_initialization_status PASSED [100%]\n\n=================================== FAILURES ===================================\n___ TestInfrastructureSmokeTests.test_infrastructure_provisioning_validation ___\ntest_smoke_tests.py:48: in test_infrastructure_provisioning_validation\n    cw_client.list_metrics(MaxRecords=1)\n../../../Library/Python/3.9/lib/python/site-packages/botocore/client.py:602: in _api_call\n    return self._make_api_call(operation_name, kwargs)\n../../../Library/Python/3.9/lib/python/site-packages/botocore/context.py:123: in wrapper\n    return func(*args, **kwargs)\n../../../Library/Python/3.9/lib/python/site-packages/botocore/client.py:1035: in _make_api_call\n    request_dict = self._convert_to_request_dict(\n../../../Library/Python/3.9/lib/python/site-packages/botocore/client.py:1102: in _convert_to_request_dict\n    request_dict = self._serializer.serialize_to_request(\n../../../Library/Python/3.9/lib/python/site-packages/botocore/validate.py:381: in serialize_to_request\n    raise ParamValidationError(report=report.generate_report())\nE   botocore.exceptions.ParamValidationError: Parameter validation failed:\nE   Unknown parameter in input: \"MaxRecords\", must be one of: Namespace, MetricName, Dimensions, NextToken, RecentlyActive, IncludeLinkedAccounts, OwningAccount\n\nDuring handling of the above exception, another exception occurred:\ntest_smoke_tests.py:61: in test_infrastructure_provisioning_validation\n    pytest.fail(f\"Infrastructure connectivity test failed: {e}\")\nE   Failed: Infrastructure connectivity test failed: Parameter validation failed:\nE   Unknown parameter in input: \"MaxRecords\", must be one of: Namespace, MetricName, Dimensions, NextToken, RecentlyActive, IncludeLinkedAccounts, OwningAccount\n=============================== warnings summary ===============================\ntests/test_smoke_tests.py::TestInfrastructureSmokeTests::test_infrastructure_provisioning_validation\ntests/test_smoke_tests.py::TestInfrastructureSmokeTests::test_health_endpoint_accessibility\ntests/test_smoke_tests.py::TestInfrastructureSmokeTests::test_health_endpoint_execution_mode_reporting\ntests/test_smoke_tests.py::TestInfrastructureSmokeTests::test_health_endpoint_llm_provider_status\ntests/test_smoke_tests.py::TestInfrastructureSmokeTests::test_component_initialization_status\n  /Users/Olu/Library/Python/3.9/lib/python/site-packages/boto3/compat.py:89: PythonDeprecationWarning: Boto3 will no longer support Python 3.9 starting April 29, 2026. To continue receiving service updates, bug fixes, and security updates please upgrade to Python 3.10 or later. More information can be found here: https://aws.amazon.com/blogs/developer/python-support-policy-updates-for-aws-sdks-and-tools/\n    warnings.warn(warning, PythonDeprecationWarning)\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n=========================== short test summary info ============================\nFAILED test_smoke_tests.py::TestInfrastructureSmokeTests::test_infrastructure_provisioning_validation\n=================== 1 failed, 8 passed, 5 warnings in 10.28s ===================\n",
      "stderr": ""
    },
    "infrastructure_provisioning": {
      "status": "passed",
      "return_code": 0,
      "total": 0,
      "passed": 0,
      "failed": 0,
      "skipped": 0,
      "stdout": "============================= test session starts ==============================\nplatform darwin -- Python 3.9.6, pytest-8.4.2, pluggy-1.6.0 -- /Library/Developer/CommandLineTools/usr/bin/python3\ncachedir: .pytest_cache\nhypothesis profile 'default'\nrootdir: /Users/Olu/vsc/ops-agent-controller\nconfigfile: pytest.ini\nplugins: mock-3.15.1, hypothesis-6.141.1, cov-7.0.0\ncollecting ... collected 17 items\n\ntest_infrastructure_provisioning.py::TestInfrastructureProvisioning::test_aws_credentials_available SKIPPED [  5%]\ntest_infrastructure_provisioning.py::TestInfrastructureProvisioning::test_cloudformation_stack_exists SKIPPED [ 11%]\ntest_infrastructure_provisioning.py::TestInfrastructureProvisioning::test_api_gateway_configuration SKIPPED [ 17%]\ntest_infrastructure_provisioning.py::TestInfrastructureProvisioning::test_lambda_function_configuration SKIPPED [ 23%]\ntest_infrastructure_provisioning.py::TestInfrastructureProvisioning::test_dynamodb_tables_configuration SKIPPED [ 29%]\ntest_infrastructure_provisioning.py::TestInfrastructureProvisioning::test_cloudwatch_logs_configuration SKIPPED [ 35%]\ntest_infrastructure_provisioning.py::TestInfrastructureProvisioning::test_iam_roles_and_permissions SKIPPED [ 41%]\ntest_infrastructure_provisioning.py::TestInfrastructureProvisioning::test_ssm_parameters_configuration SKIPPED [ 47%]\ntest_infrastructure_provisioning.py::TestInfrastructureProvisioning::test_monitoring_and_alerting_setup SKIPPED [ 52%]\ntest_infrastructure_provisioning.py::TestInfrastructureProvisioning::test_api_endpoints_accessibility SKIPPED [ 58%]\ntest_infrastructure_provisioning.py::TestInfrastructureProvisioning::test_deployment_tags_and_metadata SKIPPED [ 64%]\ntest_infrastructure_provisioning.py::TestInfrastructurePerformance::test_lambda_cold_start_performance SKIPPED [ 70%]\ntest_infrastructure_provisioning.py::TestInfrastructurePerformance::test_api_gateway_response_time SKIPPED [ 76%]\ntest_infrastructure_provisioning.py::TestInfrastructurePerformance::test_dynamodb_table_performance SKIPPED [ 82%]\ntest_infrastructure_provisioning.py::TestInfrastructureResilience::test_lambda_error_handling SKIPPED [ 88%]\ntest_infrastructure_provisioning.py::TestInfrastructureResilience::test_api_gateway_rate_limiting SKIPPED [ 94%]\ntest_infrastructure_provisioning.py::TestInfrastructureResilience::test_infrastructure_dependency_handling SKIPPED [100%]\n\n============================= 17 skipped in 0.94s ==============================\n",
      "stderr": ""
    },
    "plugin_operations": {
      "status": "failed",
      "return_code": 1,
      "total": 1,
      "passed": 1,
      "failed": 0,
      "skipped": 0,
      "stdout": "============================= test session starts ==============================\nplatform darwin -- Python 3.9.6, pytest-8.4.2, pluggy-1.6.0 -- /Library/Developer/CommandLineTools/usr/bin/python3\ncachedir: .pytest_cache\nhypothesis profile 'default'\nrootdir: /Users/Olu/vsc/ops-agent-controller\nconfigfile: pytest.ini\nplugins: mock-3.15.1, hypothesis-6.141.1, cov-7.0.0\ncollecting ... collected 36 items\n\ntest_plugin_operations.py::TestDiagnosticOperations::test_get_ec2_status_success FAILED [  2%]\ntest_plugin_operations.py::TestDiagnosticOperations::test_get_ec2_status_with_tag_filter FAILED [  5%]\ntest_plugin_operations.py::TestDiagnosticOperations::test_get_cloudwatch_metrics_success FAILED [  8%]\ntest_plugin_operations.py::TestDiagnosticOperations::test_get_cloudwatch_metrics_multiple_dimensions FAILED [ 11%]\ntest_plugin_operations.py::TestDiagnosticOperations::test_describe_alb_target_health_success FAILED [ 13%]\ntest_plugin_operations.py::TestDiagnosticOperations::test_describe_alb_target_health_with_alb_arn FAILED [ 16%]\ntest_plugin_operations.py::TestDiagnosticOperations::test_search_cloudtrail_events_success FAILED [ 19%]\ntest_plugin_operations.py::TestDiagnosticOperations::test_search_cloudtrail_events_with_filters FAILED [ 22%]\ntest_plugin_operations.py::TestDiagnosticOperations::test_diagnostic_operations_error_handling FAILED [ 25%]\ntest_plugin_operations.py::TestDiagnosticOperations::test_diagnostic_operations_read_only_guarantee FAILED [ 27%]\ntest_plugin_operations.py::TestWriteOperations::test_reboot_ec2_propose_action FAILED [ 30%]\ntest_plugin_operations.py::TestWriteOperations::test_reboot_ec2_approve_and_execute FAILED [ 33%]\ntest_plugin_operations.py::TestWriteOperations::test_scale_ecs_service_propose_action FAILED [ 36%]\ntest_plugin_operations.py::TestWriteOperations::test_scale_ecs_service_approve_and_execute FAILED [ 38%]\ntest_plugin_operations.py::TestWriteOperations::test_write_operations_require_approval FAILED [ 41%]\ntest_plugin_operations.py::TestWriteOperations::test_approval_token_expiry FAILED [ 44%]\ntest_plugin_operations.py::TestWriteOperations::test_approval_denial FAILED [ 47%]\ntest_plugin_operations.py::TestWorkflowOperations::test_create_incident_record_success FAILED [ 50%]\ntest_plugin_operations.py::TestWorkflowOperations::test_create_incident_record_different_severities FAILED [ 52%]\ntest_plugin_operations.py::TestWorkflowOperations::test_post_summary_to_channel_success FAILED [ 55%]\ntest_plugin_operations.py::TestWorkflowOperations::test_post_summary_to_channel_with_webhook FAILED [ 58%]\ntest_plugin_operations.py::TestWorkflowOperations::test_workflow_operations_no_approval_required FAILED [ 61%]\ntest_plugin_operations.py::TestWorkflowOperations::test_workflow_operations_audit_logging FAILED [ 63%]\ntest_plugin_operations.py::TestExecutionModeHandling::test_local_mock_mode_responses FAILED [ 66%]\ntest_plugin_operations.py::TestExecutionModeHandling::test_dry_run_mode_responses FAILED [ 69%]\ntest_plugin_operations.py::TestExecutionModeHandling::test_sandbox_live_mode_responses FAILED [ 72%]\ntest_plugin_operations.py::TestExecutionModeHandling::test_execution_mode_consistency FAILED [ 75%]\ntest_plugin_operations.py::TestErrorHandling::test_invalid_operation_error FAILED [ 77%]\ntest_plugin_operations.py::TestErrorHandling::test_missing_parameters_error FAILED [ 80%]\ntest_plugin_operations.py::TestErrorHandling::test_invalid_approval_token_error FAILED [ 83%]\ntest_plugin_operations.py::TestErrorHandling::test_aws_api_error_handling FAILED [ 86%]\ntest_plugin_operations.py::TestErrorHandling::test_malformed_request_error FAILED [ 88%]\ntest_plugin_operations.py::TestResponseFormatCompliance::test_successful_response_format FAILED [ 91%]\ntest_plugin_operations.py::TestResponseFormatCompliance::test_error_response_format FAILED [ 94%]\ntest_plugin_operations.py::TestResponseFormatCompliance::test_cors_headers_present PASSED [ 97%]\ntest_plugin_operations.py::TestResponseFormatCompliance::test_correlation_id_consistency FAILED [100%]\n\n=================================== FAILURES ===================================\n_____________ TestDiagnosticOperations.test_get_ec2_status_success _____________\ntest_plugin_operations.py:54: in wrapper\n    return func(*args, **kwargs)\ntest_plugin_operations.py:83: in test_get_ec2_status_success\n    assert response[\"statusCode\"] == 200\nE   assert 500 == 200\n------------------------------ Captured log call -------------------------------\nERROR    src.main:main.py:1198 Plugin handler error: No module named 'models'\n_________ TestDiagnosticOperations.test_get_ec2_status_with_tag_filter _________\ntest_plugin_operations.py:54: in wrapper\n    return func(*args, **kwargs)\ntest_plugin_operations.py:105: in test_get_ec2_status_with_tag_filter\n    assert response[\"statusCode\"] == 200\nE   assert 500 == 200\n------------------------------ Captured log call -------------------------------\nERROR    src.main:main.py:1198 Plugin handler error: No module named 'models'\n_________ TestDiagnosticOperations.test_get_cloudwatch_metrics_success _________\ntest_plugin_operations.py:54: in wrapper\n    return func(*args, **kwargs)\ntest_plugin_operations.py:125: in test_get_cloudwatch_metrics_success\n    assert response[\"statusCode\"] == 200\nE   assert 500 == 200\n------------------------------ Captured log call -------------------------------\nERROR    src.main:main.py:1198 Plugin handler error: No module named 'models'\n___ TestDiagnosticOperations.test_get_cloudwatch_metrics_multiple_dimensions ___\ntest_plugin_operations.py:152: in test_get_cloudwatch_metrics_multiple_dimensions\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n_______ TestDiagnosticOperations.test_describe_alb_target_health_success _______\ntest_plugin_operations.py:169: in test_describe_alb_target_health_success\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n____ TestDiagnosticOperations.test_describe_alb_target_health_with_alb_arn _____\ntest_plugin_operations.py:190: in test_describe_alb_target_health_with_alb_arn\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n________ TestDiagnosticOperations.test_search_cloudtrail_events_success ________\ntest_plugin_operations.py:210: in test_search_cloudtrail_events_success\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n_____ TestDiagnosticOperations.test_search_cloudtrail_events_with_filters ______\ntest_plugin_operations.py:233: in test_search_cloudtrail_events_with_filters\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n______ TestDiagnosticOperations.test_diagnostic_operations_error_handling ______\ntest_plugin_operations.py:252: in test_diagnostic_operations_error_handling\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n___ TestDiagnosticOperations.test_diagnostic_operations_read_only_guarantee ____\ntest_plugin_operations.py:274: in test_diagnostic_operations_read_only_guarantee\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n______________ TestWriteOperations.test_reboot_ec2_propose_action ______________\ntest_plugin_operations.py:304: in test_reboot_ec2_propose_action\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n___________ TestWriteOperations.test_reboot_ec2_approve_and_execute ____________\ntest_plugin_operations.py:329: in test_reboot_ec2_approve_and_execute\n    assert propose_response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n__________ TestWriteOperations.test_scale_ecs_service_propose_action ___________\ntest_plugin_operations.py:369: in test_scale_ecs_service_propose_action\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n________ TestWriteOperations.test_scale_ecs_service_approve_and_execute ________\ntest_plugin_operations.py:394: in test_scale_ecs_service_approve_and_execute\n    assert propose_response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n__________ TestWriteOperations.test_write_operations_require_approval __________\ntest_plugin_operations.py:441: in test_write_operations_require_approval\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n________________ TestWriteOperations.test_approval_token_expiry ________________\ntest_plugin_operations.py:461: in test_approval_token_expiry\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n___________________ TestWriteOperations.test_approval_denial ___________________\ntest_plugin_operations.py:489: in test_approval_denial\n    approval_token = propose_body[\"data\"][\"approval_token\"]\nE   KeyError: 'data'\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n__________ TestWorkflowOperations.test_create_incident_record_success __________\ntest_plugin_operations.py:538: in test_create_incident_record_success\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n___ TestWorkflowOperations.test_create_incident_record_different_severities ____\ntest_plugin_operations.py:565: in test_create_incident_record_different_severities\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n_________ TestWorkflowOperations.test_post_summary_to_channel_success __________\ntest_plugin_operations.py:585: in test_post_summary_to_channel_success\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n_______ TestWorkflowOperations.test_post_summary_to_channel_with_webhook _______\ntest_plugin_operations.py:608: in test_post_summary_to_channel_with_webhook\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n_____ TestWorkflowOperations.test_workflow_operations_no_approval_required _____\ntest_plugin_operations.py:638: in test_workflow_operations_no_approval_required\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n________ TestWorkflowOperations.test_workflow_operations_audit_logging _________\ntest_plugin_operations.py:658: in test_workflow_operations_audit_logging\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n___________ TestExecutionModeHandling.test_local_mock_mode_responses ___________\ntest_plugin_operations.py:685: in test_local_mock_mode_responses\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n____________ TestExecutionModeHandling.test_dry_run_mode_responses _____________\ntest_plugin_operations.py:705: in test_dry_run_mode_responses\n    approval_token = propose_body[\"data\"][\"approval_token\"]\nE   KeyError: 'data'\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n__________ TestExecutionModeHandling.test_sandbox_live_mode_responses __________\ntest_plugin_operations.py:735: in test_sandbox_live_mode_responses\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:628 No API key provided, allowing request in sandbox mode\nWARNING  src.authentication:authentication.py:279 Authentication failed: Missing or invalid userId in request body\nWARNING  src.main:main.py:1135 Plugin authentication failed: Missing or invalid userId in request body\n__________ TestExecutionModeHandling.test_execution_mode_consistency ___________\ntest_plugin_operations.py:770: in test_execution_mode_consistency\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n________________ TestErrorHandling.test_invalid_operation_error ________________\ntest_plugin_operations.py:793: in test_invalid_operation_error\n    assert response[\"statusCode\"] == 400\nE   assert 401 == 400\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n_______________ TestErrorHandling.test_missing_parameters_error ________________\ntest_plugin_operations.py:810: in test_missing_parameters_error\n    assert response[\"statusCode\"] == 400\nE   assert 401 == 400\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n_____________ TestErrorHandling.test_invalid_approval_token_error ______________\ntest_plugin_operations.py:828: in test_invalid_approval_token_error\n    assert response[\"statusCode\"] == 400\nE   assert 401 == 400\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n________________ TestErrorHandling.test_aws_api_error_handling _________________\ntest_plugin_operations.py:847: in test_aws_api_error_handling\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n________________ TestErrorHandling.test_malformed_request_error ________________\ntest_plugin_operations.py:858: in test_malformed_request_error\n    assert response[\"statusCode\"] == 400\nE   assert 401 == 400\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n_________ TestResponseFormatCompliance.test_successful_response_format _________\ntest_plugin_operations.py:882: in test_successful_response_format\n    assert response[\"statusCode\"] == 200\nE   assert 401 == 200\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n___________ TestResponseFormatCompliance.test_error_response_format ____________\ntest_plugin_operations.py:907: in test_error_response_format\n    assert response[\"statusCode\"] == 400\nE   assert 401 == 400\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n_________ TestResponseFormatCompliance.test_correlation_id_consistency _________\ntest_plugin_operations.py:948: in test_correlation_id_consistency\n    correlation_id = body[\"correlation_id\"]\nE   KeyError: 'correlation_id'\n------------------------------ Captured log call -------------------------------\nWARNING  src.authentication:authentication.py:834 Request signature validation failed: API key required\nWARNING  src.main:main.py:1135 Plugin authentication failed: Request signature validation failed: API key required\n=========================== short test summary info ============================\nFAILED test_plugin_operations.py::TestDiagnosticOperations::test_get_ec2_status_success\nFAILED test_plugin_operations.py::TestDiagnosticOperations::test_get_ec2_status_with_tag_filter\nFAILED test_plugin_operations.py::TestDiagnosticOperations::test_get_cloudwatch_metrics_success\nFAILED test_plugin_operations.py::TestDiagnosticOperations::test_get_cloudwatch_metrics_multiple_dimensions\nFAILED test_plugin_operations.py::TestDiagnosticOperations::test_describe_alb_target_health_success\nFAILED test_plugin_operations.py::TestDiagnosticOperations::test_describe_alb_target_health_with_alb_arn\nFAILED test_plugin_operations.py::TestDiagnosticOperations::test_search_cloudtrail_events_success\nFAILED test_plugin_operations.py::TestDiagnosticOperations::test_search_cloudtrail_events_with_filters\nFAILED test_plugin_operations.py::TestDiagnosticOperations::test_diagnostic_operations_error_handling\nFAILED test_plugin_operations.py::TestDiagnosticOperations::test_diagnostic_operations_read_only_guarantee\nFAILED test_plugin_operations.py::TestWriteOperations::test_reboot_ec2_propose_action\nFAILED test_plugin_operations.py::TestWriteOperations::test_reboot_ec2_approve_and_execute\nFAILED test_plugin_operations.py::TestWriteOperations::test_scale_ecs_service_propose_action\nFAILED test_plugin_operations.py::TestWriteOperations::test_scale_ecs_service_approve_and_execute\nFAILED test_plugin_operations.py::TestWriteOperations::test_write_operations_require_approval\nFAILED test_plugin_operations.py::TestWriteOperations::test_approval_token_expiry\nFAILED test_plugin_operations.py::TestWriteOperations::test_approval_denial\nFAILED test_plugin_operations.py::TestWorkflowOperations::test_create_incident_record_success\nFAILED test_plugin_operations.py::TestWorkflowOperations::test_create_incident_record_different_severities\nFAILED test_plugin_operations.py::TestWorkflowOperations::test_post_summary_to_channel_success\nFAILED test_plugin_operations.py::TestWorkflowOperations::test_post_summary_to_channel_with_webhook\nFAILED test_plugin_operations.py::TestWorkflowOperations::test_workflow_operations_no_approval_required\nFAILED test_plugin_operations.py::TestWorkflowOperations::test_workflow_operations_audit_logging\nFAILED test_plugin_operations.py::TestExecutionModeHandling::test_local_mock_mode_responses\nFAILED test_plugin_operations.py::TestExecutionModeHandling::test_dry_run_mode_responses\nFAILED test_plugin_operations.py::TestExecutionModeHandling::test_sandbox_live_mode_responses\nFAILED test_plugin_operations.py::TestExecutionModeHandling::test_execution_mode_consistency\nFAILED test_plugin_operations.py::TestErrorHandling::test_invalid_operation_error\nFAILED test_plugin_operations.py::TestErrorHandling::test_missing_parameters_error\nFAILED test_plugin_operations.py::TestErrorHandling::test_invalid_approval_token_error\nFAILED test_plugin_operations.py::TestErrorHandling::test_aws_api_error_handling\nFAILED test_plugin_operations.py::TestErrorHandling::test_malformed_request_error\nFAILED test_plugin_operations.py::TestResponseFormatCompliance::test_successful_response_format\nFAILED test_plugin_operations.py::TestResponseFormatCompliance::test_error_response_format\nFAILED test_plugin_operations.py::TestResponseFormatCompliance::test_correlation_id_consistency\n========================= 35 failed, 1 passed in 0.96s =========================\n",
      "stderr": ""
    },
    "diagnosis_tools": {
      "status": "failed",
      "return_code": 1,
      "total": 0,
      "passed": 0,
      "failed": 0,
      "skipped": 0,
      "stdout": "============================= test session starts ==============================\nplatform darwin -- Python 3.9.6, pytest-8.4.2, pluggy-1.6.0 -- /Library/Developer/CommandLineTools/usr/bin/python3\ncachedir: .pytest_cache\nhypothesis profile 'default'\nrootdir: /Users/Olu/vsc/ops-agent-controller\nconfigfile: pytest.ini\nplugins: mock-3.15.1, hypothesis-6.141.1, cov-7.0.0\ncollecting ... collected 11 items\n\ntest_smoke_tests.py::TestDiagnosisToolValidation::test_get_ec2_status_operation PASSED [  9%]\ntest_smoke_tests.py::TestDiagnosisToolValidation::test_get_cloudwatch_metrics_operation PASSED [ 18%]\ntest_smoke_tests.py::TestDiagnosisToolValidation::test_describe_alb_target_health_operation PASSED [ 27%]\ntest_smoke_tests.py::TestDiagnosisToolValidation::test_search_cloudtrail_events_operation PASSED [ 36%]\ntest_smoke_tests.py::TestDiagnosisToolValidation::test_reboot_ec2_write_operation PASSED [ 45%]\ntest_smoke_tests.py::TestDiagnosisToolValidation::test_scale_ecs_service_write_operation PASSED [ 54%]\ntest_smoke_tests.py::TestDiagnosisToolValidation::test_create_incident_record_workflow_operation PASSED [ 63%]\ntest_smoke_tests.py::TestDiagnosisToolValidation::test_post_summary_to_channel_workflow_operation FAILED [ 72%]\ntest_smoke_tests.py::TestDiagnosisToolValidation::test_diagnosis_tools_error_handling PASSED [ 81%]\ntest_smoke_tests.py::TestDiagnosisToolValidation::test_diagnosis_tools_integration_with_chat PASSED [ 90%]\ntest_smoke_tests.py::TestDiagnosisToolValidation::test_diagnosis_tools_read_only_guarantee PASSED [100%]\n\n=================================== FAILURES ===================================\n_ TestDiagnosisToolValidation.test_post_summary_to_channel_workflow_operation __\ntest_smoke_tests.py:514: in test_post_summary_to_channel_workflow_operation\n    with patch('src.workflow_tools.ChannelPostingTool') as MockChannelTool:\n/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/unittest/mock.py:1405: in __enter__\n    original, local = self.get_original()\n/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/unittest/mock.py:1378: in get_original\n    raise AttributeError(\nE   AttributeError: <module 'src.workflow_tools' from '/Users/Olu/vsc/ops-agent-controller/src/workflow_tools.py'> does not have the attribute 'ChannelPostingTool'\n=============================== warnings summary ===============================\ntests/test_smoke_tests.py::TestDiagnosisToolValidation::test_get_ec2_status_operation\ntests/test_smoke_tests.py::TestDiagnosisToolValidation::test_reboot_ec2_write_operation\ntests/test_smoke_tests.py::TestDiagnosisToolValidation::test_diagnosis_tools_integration_with_chat\n  /Users/Olu/Library/Python/3.9/lib/python/site-packages/boto3/compat.py:89: PythonDeprecationWarning: Boto3 will no longer support Python 3.9 starting April 29, 2026. To continue receiving service updates, bug fixes, and security updates please upgrade to Python 3.10 or later. More information can be found here: https://aws.amazon.com/blogs/developer/python-support-policy-updates-for-aws-sdks-and-tools/\n    warnings.warn(warning, PythonDeprecationWarning)\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n=========================== short test summary info ============================\nFAILED test_smoke_tests.py::TestDiagnosisToolValidation::test_post_summary_to_channel_workflow_operation\n=================== 1 failed, 10 passed, 3 warnings in 1.23s ===================\n",
      "stderr": ""
    },
    "approval_gate": {
      "status": "failed",
      "return_code": 1,
      "total": 0,
      "passed": 0,
      "failed": 0,
      "skipped": 0,
      "stdout": "============================= test session starts ==============================\nplatform darwin -- Python 3.9.6, pytest-8.4.2, pluggy-1.6.0 -- /Library/Developer/CommandLineTools/usr/bin/python3\ncachedir: .pytest_cache\nhypothesis profile 'default'\nrootdir: /Users/Olu/vsc/ops-agent-controller\nconfigfile: pytest.ini\nplugins: mock-3.15.1, hypothesis-6.141.1, cov-7.0.0\ncollecting ... collected 10 items\n\ntest_smoke_tests.py::TestApprovalGateAndRemediationTesting::test_approval_gate_creation_and_validation FAILED [ 10%]\ntest_smoke_tests.py::TestApprovalGateAndRemediationTesting::test_end_to_end_approval_workflow_all_operations PASSED [ 20%]\ntest_smoke_tests.py::TestApprovalGateAndRemediationTesting::test_workflow_operations_no_approval_required PASSED [ 30%]\ntest_smoke_tests.py::TestApprovalGateAndRemediationTesting::test_diagnostic_operations_no_approval_required PASSED [ 40%]\ntest_smoke_tests.py::TestApprovalGateAndRemediationTesting::test_approval_gate_token_expiry PASSED [ 50%]\ntest_smoke_tests.py::TestApprovalGateAndRemediationTesting::test_approval_gate_token_consumption PASSED [ 60%]\ntest_smoke_tests.py::TestApprovalGateAndRemediationTesting::test_remediation_tool_dry_run_mode PASSED [ 70%]\ntest_smoke_tests.py::TestApprovalGateAndRemediationTesting::test_remediation_tool_tag_validation PASSED [ 80%]\ntest_smoke_tests.py::TestApprovalGateAndRemediationTesting::test_end_to_end_approval_workflow PASSED [ 90%]\ntest_smoke_tests.py::TestApprovalGateAndRemediationTesting::test_approval_denial_workflow PASSED [100%]\n\n=================================== FAILURES ===================================\n_ TestApprovalGateAndRemediationTesting.test_approval_gate_creation_and_validation _\ntest_smoke_tests.py:696: in test_approval_gate_creation_and_validation\n    assert approval_request.requested_by == \"test-user\"\nE   AttributeError: 'ApprovalToken' object has no attribute 'requested_by'\n=============================== warnings summary ===============================\ntests/test_smoke_tests.py::TestApprovalGateAndRemediationTesting::test_end_to_end_approval_workflow_all_operations\ntests/test_smoke_tests.py::TestApprovalGateAndRemediationTesting::test_remediation_tool_tag_validation\n  /Users/Olu/Library/Python/3.9/lib/python/site-packages/boto3/compat.py:89: PythonDeprecationWarning: Boto3 will no longer support Python 3.9 starting April 29, 2026. To continue receiving service updates, bug fixes, and security updates please upgrade to Python 3.10 or later. More information can be found here: https://aws.amazon.com/blogs/developer/python-support-policy-updates-for-aws-sdks-and-tools/\n    warnings.warn(warning, PythonDeprecationWarning)\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n=========================== short test summary info ============================\nFAILED test_smoke_tests.py::TestApprovalGateAndRemediationTesting::test_approval_gate_creation_and_validation\n=================== 1 failed, 9 passed, 2 warnings in 4.14s ====================\n",
      "stderr": ""
    },
    "end_to_end_workflow": {
      "status": "failed",
      "return_code": 1,
      "total": 0,
      "passed": 0,
      "failed": 0,
      "skipped": 0,
      "stdout": "============================= test session starts ==============================\nplatform darwin -- Python 3.9.6, pytest-8.4.2, pluggy-1.6.0 -- /Library/Developer/CommandLineTools/usr/bin/python3\ncachedir: .pytest_cache\nhypothesis profile 'default'\nrootdir: /Users/Olu/vsc/ops-agent-controller\nconfigfile: pytest.ini\nplugins: mock-3.15.1, hypothesis-6.141.1, cov-7.0.0\ncollecting ... collected 1 item\n\ntest_integration.py::TestSystemIntegration::test_end_to_end_remediation_flow FAILED [100%]\n\n=================================== FAILURES ===================================\n____________ TestSystemIntegration.test_end_to_end_remediation_flow ____________\ntest_integration.py:403: in test_end_to_end_remediation_flow\n    assert data.get(\"approval_required\") is True\nE   assert None is True\nE    +  where None = <built-in method get of dict object at 0x10eea1380>('approval_required')\nE    +    where <built-in method get of dict object at 0x10eea1380> = {'channel_data': {'correlation_id': 'e26cd1b6-6745-47f9-8edf-44a6fe995465', 'error': True, 'error_code': 'LLM_ERROR', 'format': 'error', ...}, 'correlation_id': 'e26cd1b6-6745-47f9-8edf-44a6fe995465', 'message': \"Error: I'm having trouble understanding your request. Please try again.\", 'timestamp': '2026-02-01T22:29:58.823545Z'}.get\n------------------------------ Captured log call -------------------------------\nERROR    src.audit_logger:audit_logger.py:365 CloudWatch Logs write failed: An error occurred (ResourceNotFoundException) when calling the CreateLogStream operation: The specified log group does not exist.\nERROR    src.audit_logger:audit_logger.py:326 Failed to write audit event to CloudWatch: An error occurred (ResourceNotFoundException) when calling the CreateLogStream operation: The specified log group does not exist.\nERROR    src.llm_provider:llm_provider.py:324 Failed to generate tool calls: Non-retryable error: An error occurred (ResourceNotFoundException) when calling the Converse operation: Model use case details have not been submitted for this account. Fill out the Anthropic use case details form before using the model. If you have already filled out the form, try again in 15 minutes.\nERROR    src.main:main.py:794 LLM provider error: Failed to generate tool calls: Non-retryable error: An error occurred (ResourceNotFoundException) when calling the Converse operation: Model use case details have not been submitted for this account. Fill out the Anthropic use case details form before using the model. If you have already filled out the form, try again in 15 minutes.\nERROR    src.audit_logger:audit_logger.py:365 CloudWatch Logs write failed: An error occurred (ResourceNotFoundException) when calling the CreateLogStream operation: The specified log group does not exist.\nERROR    src.audit_logger:audit_logger.py:326 Failed to write audit event to CloudWatch: An error occurred (ResourceNotFoundException) when calling the CreateLogStream operation: The specified log group does not exist.\n=============================== warnings summary ===============================\ntests/test_integration.py::TestSystemIntegration::test_end_to_end_remediation_flow\n  /Users/Olu/Library/Python/3.9/lib/python/site-packages/boto3/compat.py:89: PythonDeprecationWarning: Boto3 will no longer support Python 3.9 starting April 29, 2026. To continue receiving service updates, bug fixes, and security updates please upgrade to Python 3.10 or later. More information can be found here: https://aws.amazon.com/blogs/developer/python-support-policy-updates-for-aws-sdks-and-tools/\n    warnings.warn(warning, PythonDeprecationWarning)\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n=========================== short test summary info ============================\nFAILED test_integration.py::TestSystemIntegration::test_end_to_end_remediation_flow\n========================= 1 failed, 1 warning in 2.19s =========================\n",
      "stderr": ""
    },
    "audit_logging": {
      "status": "failed",
      "return_code": 1,
      "total": 0,
      "passed": 0,
      "failed": 0,
      "skipped": 0,
      "stdout": "============================= test session starts ==============================\nplatform darwin -- Python 3.9.6, pytest-8.4.2, pluggy-1.6.0 -- /Library/Developer/CommandLineTools/usr/bin/python3\ncachedir: .pytest_cache\nhypothesis profile 'default'\nrootdir: /Users/Olu/vsc/ops-agent-controller\nconfigfile: pytest.ini\nplugins: mock-3.15.1, hypothesis-6.141.1, cov-7.0.0\ncollecting ... collected 8 items\n\ntest_smoke_tests.py::TestAuditLoggingVerification::test_audit_logger_initialization PASSED [ 12%]\ntest_smoke_tests.py::TestAuditLoggingVerification::test_audit_logging_request_received PASSED [ 25%]\ntest_smoke_tests.py::TestAuditLoggingVerification::test_audit_logging_tool_execution PASSED [ 37%]\ntest_smoke_tests.py::TestAuditLoggingVerification::test_audit_logging_approval_workflow FAILED [ 50%]\ntest_smoke_tests.py::TestAuditLoggingVerification::test_audit_logging_error_handling PASSED [ 62%]\ntest_smoke_tests.py::TestAuditLoggingVerification::test_audit_logging_secret_sanitization PASSED [ 75%]\ntest_smoke_tests.py::TestAuditLoggingVerification::test_audit_logging_correlation_id_consistency PASSED [ 87%]\ntest_smoke_tests.py::TestAuditLoggingVerification::test_audit_logging_integration_with_chat PASSED [100%]\n\n=================================== FAILURES ===================================\n______ TestAuditLoggingVerification.test_audit_logging_approval_workflow _______\ntest_smoke_tests.py:1232: in test_audit_logging_approval_workflow\n    approval_request = ApprovalRequest(\nE   TypeError: __init__() got an unexpected keyword argument 'requested_by'\n=============================== warnings summary ===============================\ntests/test_smoke_tests.py::TestAuditLoggingVerification::test_audit_logger_initialization\ntests/test_smoke_tests.py::TestAuditLoggingVerification::test_audit_logging_request_received\ntests/test_smoke_tests.py::TestAuditLoggingVerification::test_audit_logging_tool_execution\ntests/test_smoke_tests.py::TestAuditLoggingVerification::test_audit_logging_approval_workflow\ntests/test_smoke_tests.py::TestAuditLoggingVerification::test_audit_logging_error_handling\ntests/test_smoke_tests.py::TestAuditLoggingVerification::test_audit_logging_secret_sanitization\ntests/test_smoke_tests.py::TestAuditLoggingVerification::test_audit_logging_correlation_id_consistency\ntests/test_smoke_tests.py::TestAuditLoggingVerification::test_audit_logging_integration_with_chat\n  /Users/Olu/Library/Python/3.9/lib/python/site-packages/boto3/compat.py:89: PythonDeprecationWarning: Boto3 will no longer support Python 3.9 starting April 29, 2026. To continue receiving service updates, bug fixes, and security updates please upgrade to Python 3.10 or later. More information can be found here: https://aws.amazon.com/blogs/developer/python-support-policy-updates-for-aws-sdks-and-tools/\n    warnings.warn(warning, PythonDeprecationWarning)\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n=========================== short test summary info ============================\nFAILED test_smoke_tests.py::TestAuditLoggingVerification::test_audit_logging_approval_workflow\n=================== 1 failed, 7 passed, 8 warnings in 1.10s ====================\n",
      "stderr": ""
    },
    "monitoring_integration": {
      "status": "passed",
      "return_code": 0,
      "total": 0,
      "passed": 0,
      "failed": 0,
      "skipped": 0,
      "stdout": "============================= test session starts ==============================\nplatform darwin -- Python 3.9.6, pytest-8.4.2, pluggy-1.6.0 -- /Library/Developer/CommandLineTools/usr/bin/python3\ncachedir: .pytest_cache\nhypothesis profile 'default'\nrootdir: /Users/Olu/vsc/ops-agent-controller\nconfigfile: pytest.ini\nplugins: mock-3.15.1, hypothesis-6.141.1, cov-7.0.0\ncollecting ... collected 3 items\n\ntest_infrastructure_provisioning.py::TestInfrastructurePerformance::test_lambda_cold_start_performance SKIPPED [ 33%]\ntest_infrastructure_provisioning.py::TestInfrastructurePerformance::test_api_gateway_response_time SKIPPED [ 66%]\ntest_infrastructure_provisioning.py::TestInfrastructurePerformance::test_dynamodb_table_performance SKIPPED [100%]\n\n============================== 3 skipped in 0.83s ==============================\n",
      "stderr": ""
    }
  },
  "summary": {
    "total_tests": 1,
    "passed_tests": 1,
    "failed_tests": 0,
    "skipped_tests": 0
  },
  "end_time": "2026-02-01T22:30:11.242167",
  "total_duration_seconds": 47.612596
}